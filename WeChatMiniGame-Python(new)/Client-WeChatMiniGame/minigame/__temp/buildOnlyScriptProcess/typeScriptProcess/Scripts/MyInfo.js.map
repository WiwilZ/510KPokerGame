{"version":3,"sources":["__temp/buildOnlyScriptProcess/inlineFunctionProcess/Scripts/MyInfo.ts"],"names":[],"mappings":";;;AAAA,iCAA4B;AAC5B,qCAAoC;AACpC,iCAA0C;AAI1C;IAAoC,kCAAa;IAAjD;;IAmCA,CAAC;IApBU,wBAAO,GAAd;QAAA,iBAkBC;QAjBG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,gBAAM,CAAC,QAAQ,CAAC,CAAC;QAC3H,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,gBAAM,CAAC,OAAO,CAAC,CAAC;QAE7G,wBAAgB,CAAC,iBAAO,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAC,WAA+B;YACrE,KAAI,CAAC,YAAY,CAAC,WAAW,GAAG,WAAW,CAAC;YAC5C,KAAI,CAAC,YAAY,CAAC,SAAS,GAAG,IAAI,CAAC;QACvC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,iBAAO,CAAC,QAAQ,CAAC;QAE3C,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC;YAC7B,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,qBAAqB,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE;gBAC3E,KAAI,CAAC,WAAW,CAAC,OAAO,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,eAAe,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;gBACrC,KAAI,CAAC,YAAY,CAAC,SAAS,GAAG,KAAK,CAAC;gBACpC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IA7BD;QAHC,gBAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;YACxB,IAAI,EAAE,gBAAM,CAAC,SAAS,CAAC,QAAQ;SAClC,CAAC;+CACkC;IAKpC;QAHC,gBAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;YACxB,IAAI,EAAE,gBAAM,CAAC,SAAS,CAAC,UAAU;SACpC,CAAC;mDACiD;IATlC,MAAM;QAD1B,gBAAM,CAAC,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;OACjB,MAAM,CAmC1B;IAAD,aAAC;CAnCD,AAmCC,CAnCmC,gBAAM,CAAC,MAAM,GAmChD;kBAnCoB,MAAM","file":"MyInfo.js","sourcesContent":["import engine from \"engine\";\nimport { databus } from \"./Databus\";\nimport { urlToSpriteFrame } from \"./utils\"\n\n\n@engine.decorators.serialize(\"MyInfo\")\nexport default class MyInfo extends engine.Script {\n    @engine.decorators.property({\n        type: engine.TypeNames.UIButton\n    })\n    public readyButton: engine.UIButton;\n\n    @engine.decorators.property({\n        type: engine.TypeNames.TouchInput\n    })\n    public readyTouchInput: engine.TouchInputComponent;\n\n\n    private avatarSprite: engine.UISprite;\n    private nicknameLabel: engine.UILabel;\n\n    public onAwake() {\n        this.avatarSprite = this.entity.transform2D.findChildByName('CircleMask').children[0].entity.getComponent(engine.UISprite);\n        this.nicknameLabel = this.entity.transform2D.findChildByName('Nickname').entity.getComponent(engine.UILabel);\n\n        urlToSpriteFrame(databus.avatarUrl).then((spriteFrame: engine.SpriteFrame) => {\n            this.avatarSprite.spriteFrame = spriteFrame;\n            this.avatarSprite.grayScale = true;\n        });\n        this.nicknameLabel.text = databus.nickname;\n\n        this.readyTouchInput.onClick.add(() => {\n            engine.game.customEventEmitter.emit('update_ready_status', { is_ready: true }, () => {\n                this.readyButton.disable = true;\n                this.readyTouchInput.onClick.clear();\n                this.avatarSprite.grayScale = false;\n                console.log('get ready');\n            });\n        });\n    }\n\n}\n"]}