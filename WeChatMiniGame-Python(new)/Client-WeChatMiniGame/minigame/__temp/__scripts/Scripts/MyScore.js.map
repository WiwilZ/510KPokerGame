{"version":3,"sources":["Scripts/MyScore.ts"],"names":[],"mappings":";;;AAAA,iCAA4B;AAC5B,qCAAoC;AAIpC;IAAqC,mCAAa;IAAlD;;IAyDA,CAAC;IA/CU,yBAAO,GAAd;QACI,IAAI,CAAC,IAAI,EAAE,CAAC;QAEZ,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACzE,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAC5D,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEzE,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAEM,2BAAS,GAAhB;QACI,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACrF,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACxE,gBAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACzF,CAAC;IAEO,sBAAI,GAAZ;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,gBAAM,CAAC,OAAO,CAAC,CAAC;QAEtD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC1C,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC1D,CAAC;IAEO,uBAAK,GAAb;QACI,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,EAAE,CAAC;IACzB,CAAC;IAEO,8BAAY,GAApB;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAEO,wBAAM,GAAd;QACI,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IAEO,8BAAY,GAApB,UAAqB,EAAiB;YAAf,MAAM,YAAA,EAAE,KAAK,WAAA;QAChC,IAAI,MAAM,KAAK,iBAAO,CAAC,MAAM,EAAE;YAC3B,IAAI,CAAC,OAAO,IAAI,KAAK,CAAC;YACtB,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;IACL,CAAC;IAEO,2BAAS,GAAjB;QACI,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,YAAU,IAAI,CAAC,OAAS,CAAC;IAC/C,CAAC;IAxDgB,OAAO;QAD3B,gBAAM,CAAC,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;OAClB,OAAO,CAyD3B;IAAD,cAAC;CAzDD,AAyDC,CAzDoC,gBAAM,CAAC,MAAM,GAyDjD;kBAzDoB,OAAO","file":"MyScore.js","sourcesContent":["import engine from \"engine\";\nimport { databus } from \"./Databus\";\n\n\n@engine.decorators.serialize(\"MyScore\")\nexport default class MyScore extends engine.Script {\n    private label: engine.UILabel;\n\n    private myScore: number;\n\n    private playerExitHandler;\n    private dealHandler;\n    private playerPlayHandler;\n\n\n    public onAwake() {\n        this.init();\n\n        engine.game.customEventEmitter.on('player_exit', this.playerExitHandler);\n        engine.game.customEventEmitter.on('deal', this.dealHandler);\n        engine.game.customEventEmitter.on('player_play', this.playerPlayHandler);\n\n        this.reset();\n    }\n\n    public onDestroy() {\n        engine.game.customEventEmitter.removeListener('player_exit', this.playerExitHandler);\n        engine.game.customEventEmitter.removeListener('deal', this.dealHandler);\n        engine.game.customEventEmitter.removeListener('player_play', this.playerPlayHandler);\n    }\n\n    private init() {\n        this.label = this.entity.getComponent(engine.UILabel);\n\n        this.playerExitHandler = this.onPlayerExit.bind(this);\n        this.dealHandler = this.onDeal.bind(this);\n        this.playerPlayHandler = this.onPlayerPlay.bind(this);\n    }\n\n    private reset() {\n        this.myScore = 0;\n        this.label.text = '';\n    }\n\n    private onPlayerExit() {\n        this.reset();\n    }\n\n    private onDeal() {\n        this.showScore();\n    }\n\n    private onPlayerPlay({ scorer, score }) {\n        if (scorer === databus.mySeat) {\n            this.myScore += score;\n            this.showScore();\n        }\n    }\n\n    private showScore() {\n        this.label.text = `score: ${this.myScore}`;\n    }\n}\n"]}